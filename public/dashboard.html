<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chzzk Bot Dashboard</title>
    <!-- Vercel 연동 필수 스크립트 -->
    <script src="/config.js"></script>
    <script src="/api-adapter.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/vote-ui-enhanced.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <button class="sidebar-toggle" id="sidebar-toggle">
                <i class="fas fa-bars"></i>
            </button>
            <h1 class="header-title" id="header-title">대시보드</h1>
        </div>
        <div class="header-right" id="header-profile" style="display: none;">
            <div class="header-profile-info">
                <div class="header-avatar" id="header-avatar"></div>
                <span class="header-username" id="header-username"></span>
            </div>
            <button class="header-logout" onclick="handleLogout()" title="로그아웃">
                <i class="fas fa-sign-out-alt"></i>
            </button>
        </div>
    </header>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-profile" id="sidebar-profile" style="display: none;">
                <div class="sidebar-avatar" id="sidebar-avatar"></div>
                <div class="sidebar-info">
                    <div class="sidebar-name" id="sidebar-name"></div>
                    <div class="sidebar-status">
                        <span class="status-dot" id="sidebar-status-dot"></span>
                        <span id="sidebar-status-text">오프라인</span>
                    </div>
                </div>
            </div>
            <div class="bot-status">
                <div class="status-indicator" id="bot-status-indicator"></div>
                <span id="bot-status-text">봇 미연결</span>
            </div>
        </div>
        
        <nav class="sidebar-nav">
            <ul class="nav-list">
                <li class="nav-item active" data-tab="dashboard">
                    <i class="fas fa-home"></i>
                    <span>대시보드</span>
                </li>
                <li class="nav-item" data-tab="commands">
                    <i class="fas fa-terminal"></i>
                    <span>명령어</span>
                </li>
                <li class="nav-item" data-tab="macros">
                    <i class="fas fa-clock"></i>
                    <span>매크로</span>
                </li>
                <li class="nav-item" data-tab="counters">
                    <i class="fas fa-calculator"></i>
                    <span>카운터</span>
                </li>
                <li class="nav-item" data-tab="songs">
                    <i class="fas fa-music"></i>
                    <span>신청곡</span>
                </li>
                <li class="nav-item" data-tab="votes">
                    <i class="fas fa-poll"></i>
                    <span>투표</span>
                </li>
                <li class="nav-item" data-tab="participation">
                    <i class="fas fa-users"></i>
                    <span>시청자 참여</span>
                </li>
                <li class="nav-item" data-tab="points">
                    <i class="fas fa-coins"></i>
                    <span>포인트</span>
                </li>
            </ul>
        </nav>
        
        <div class="sidebar-footer">
            <button class="logout-btn" id="logout-btn" onclick="handleLogout()" style="display: none;">
                <i class="fas fa-sign-out-alt"></i>
                <span>로그아웃</span>
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard Tab -->
        <div id="dashboard-tab" class="tab-content active">
            <div class="dashboard-grid">
                <!-- Channel Info Card -->
                <div class="card channel-card">
                    <div class="channel-info">
                        <div class="channel-avatar" id="channel-avatar-lg"></div>
                        <div class="channel-details">
                            <h2 class="channel-name" id="channel-name-lg">채널명</h2>
                            <div class="channel-stats">
                                <span class="follower-count" id="follower-count">
                                    <i class="fas fa-heart"></i>
                                    <span>0 팔로워</span>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="stream-info" id="stream-info">
                        <div class="stream-status" id="stream-status">
                            <span class="status-badge offline">오프라인</span>
                            <span class="viewer-count" id="viewer-count">0명</span>
                        </div>
                        <div class="stream-title" id="stream-title">방송 제목</div>
                        <div class="stream-category" id="stream-category">
                            <i class="fas fa-gamepad"></i>
                            <span>카테고리</span>
                        </div>
                    </div>
                </div>

                <!-- Stats Card -->
                <div class="card stats-card">
                    <div class="card-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <h3 class="card-title" style="margin: 0;"><i class="fas fa-chart-line"></i> 봇 현황</h3>
                        <label class="toggle-switch" title="봇 채팅 켜기/끄기">
                            <input type="checkbox" id="bot-chat-toggle" checked>
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="stat-commands">0</div>
                            <div class="stat-label">명령어</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="stat-songs">0</div>
                            <div class="stat-label">신청곡</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="stat-votes">0</div>
                            <div class="stat-label">투표</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="stat-participants">0</div>
                            <div class="stat-label">참여자</div>
                        </div>
                    </div>
                </div>

                <!-- Quick Nav -->
                <div class="card quick-nav-card">
                    <h3 class="card-title"><i class="fas fa-rocket"></i> 빠른 접근</h3>
                    <div class="quick-nav-grid">
                        <button class="quick-btn" onclick="switchTab('commands')">
                            <i class="fas fa-terminal"></i>
                            <span>명령어</span>
                        </button>
                        <button class="quick-btn" onclick="switchTab('songs')">
                            <i class="fas fa-music"></i>
                            <span>신청곡</span>
                        </button>
                        <button class="quick-btn" onclick="switchTab('votes')">
                            <i class="fas fa-poll"></i>
                            <span>투표</span>
                        </button>
                        <button class="quick-btn" onclick="switchTab('participation')">
                            <i class="fas fa-users"></i>
                            <span>참여</span>
                        </button>
                    </div>
                </div>

                <!-- Live Chat -->
                <div class="card chat-card">
                    <div class="card-header">
                        <h3 class="card-title"><i class="fas fa-comments"></i> 실시간 채팅</h3>
                        <button class="expand-btn" id="expand-chat-btn" title="팝업">
                            <i class="fas fa-external-link-alt"></i>
                        </button>
                    </div>
                    <div class="chat-messages" id="chat-messages">
                        <div class="chat-empty">
                            <i class="fas fa-comments"></i>
                            <p>채팅이 없습니다</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Commands Tab -->
        <div id="commands-tab" class="tab-content">
            <div class="tab-header">
                <h2>명령어 관리</h2>
                <button class="btn btn-primary" onclick="showModal('add-command-modal')">
                    <i class="fas fa-plus"></i> 추가
                </button>
            </div>
            <div class="card">
                <div class="item-list" id="commands-list">
                    <div class="empty-state">
                        <i class="fas fa-terminal"></i>
                        <p>등록된 명령어가 없습니다</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Macros Tab -->
        <div id="macros-tab" class="tab-content">
            <div class="tab-header">
                <h2>매크로 관리</h2>
                <button class="btn btn-primary" onclick="showModal('add-macro-modal')">
                    <i class="fas fa-plus"></i> 추가
                </button>
            </div>
            <div class="notice-banner">
                <i class="fas fa-info-circle"></i>
                방송 중에만 매크로가 작동합니다
            </div>
            <div class="card">
                <div class="item-list" id="macros-list">
                    <div class="empty-state">
                        <i class="fas fa-clock"></i>
                        <p>등록된 매크로가 없습니다</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Counters Tab -->
        <div id="counters-tab" class="tab-content">
            <div class="tab-header">
                <h2>카운터 관리</h2>
                <button class="btn btn-primary" onclick="showModal('add-counter-modal')">
                    <i class="fas fa-plus"></i> 추가
                </button>
            </div>
            <div class="card">
                <div class="item-list" id="counters-list">
                    <div class="empty-state">
                        <i class="fas fa-calculator"></i>
                        <p>등록된 카운터가 없습니다</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Songs Tab -->
        <div id="songs-tab" class="tab-content">
            <div class="tab-header">
                <h2>신청곡 관리</h2>
            </div>
            <div class="songs-grid">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-play-circle"></i> 현재 재생</h3>
                    <div class="current-song" id="current-song">
                        <div class="no-song">재생 중인 곡이 없습니다</div>
                    </div>
                    <div class="player-controls">
                        <button class="btn btn-secondary" id="prev-song-btn" disabled>
                            <i class="fas fa-step-backward"></i>
                        </button>
                        <button class="btn btn-primary" id="play-pause-btn" disabled>
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="btn btn-secondary" id="skip-song-btn" onclick="skipSong()">
                            <i class="fas fa-step-forward"></i>
                        </button>
                        <button class="btn btn-danger" id="stop-song-btn" onclick="stopSong()">
                            <i class="fas fa-stop"></i>
                        </button>
                    </div>
                </div>
                <div class="card">
                    <h3 class="card-title">
                        <i class="fas fa-list"></i> 대기열
                        <span class="badge" id="queue-count">0</span>
                    </h3>
                    <div class="queue-list" id="song-queue-list">
                        <div class="empty-state">대기열이 비어있습니다</div>
                    </div>
                </div>
            </div>
            <div class="card" style="margin-top: 20px;">
                <h3 class="card-title"><i class="fas fa-cog"></i> 신청곡 설정</h3>
                <div class="settings-grid">
                    <div class="setting-item" style="grid-column: span 3;">
                        <label>신청 모드</label>
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="songRequestMode" value="all" checked>
                                <span>전체 허용</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="songRequestMode" value="cooldown">
                                <span>쿨타임 적용</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="songRequestMode" value="donation">
                                <span>후원시 가능</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="songRequestMode" value="off">
                                <span>기능 끄기</span>
                            </label>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label>쿨타임 (초)</label>
                        <input type="number" class="form-input" id="song-cooldown" value="30" min="0">
                    </div>
                    <div class="setting-item" id="min-donation-group">
                        <label>최소 후원금 (원)</label>
                        <input type="number" class="form-input" id="song-min-donation" value="0" min="0">
                    </div>
                </div>
                <button class="btn btn-primary" id="save-song-settings" style="margin-top: 16px;" onclick="saveSongSettings()">
                    <i class="fas fa-save"></i> 저장
                </button>
                <button class="btn btn-secondary" onclick="openPlayer()" style="margin-top: 16px; margin-left: 8px;">
                    <i class="fas fa-external-link-alt"></i> 플레이어 열기
                </button>
            </div>
        </div>

        <!-- Votes Tab -->
        <div id="votes-tab" class="tab-content">
            <div class="vote-tabs">
                <button class="vote-sub-tab active" data-vote-subtab="draw">
                    <i class="fas fa-users"></i> 시청자 추첨
                </button>
                <button class="vote-sub-tab" data-vote-subtab="vote">
                    <i class="fas fa-poll"></i> 숫자 투표
                </button>
                <button class="vote-sub-tab" data-vote-subtab="roulette">
                    <i class="fas fa-dharmachakra"></i> 룰렛
                </button>
                <button class="vote-sub-tab" data-vote-subtab="settings">
                    <i class="fas fa-cog"></i> 설정
                </button>
            </div>

            <!-- Draw Subtab -->
            <div id="draw-subtab" class="vote-subtab active">
                <div class="vote-grid">
                    <div class="card">
                        <h3 class="card-title"><i class="fas fa-cog"></i> 추첨 설정</h3>
                        <div class="form-group">
                            <label>참여 키워드</label>
                            <input type="text" class="form-input" id="draw-keyword" value="!참여">
                        </div>
                        <div class="form-group">
                            <label>당첨자 수</label>
                            <input type="number" class="form-input" id="draw-winner-count" value="1" min="1">
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="draw-subscriber-only">
                                <span>구독자만 참여</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="draw-exclude-previous" checked>
                                <span>이전 당첨자 제외</span>
                            </label>
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-primary" id="start-draw-btn">
                                <i class="fas fa-play"></i> 시작
                            </button>
                            <button class="btn btn-warning" id="stop-draw-btn" style="display:none;">
                                <i class="fas fa-stop"></i> 마감
                            </button>
                            <button class="btn btn-success" id="execute-draw-btn" style="display:none;">
                                <i class="fas fa-trophy"></i> 추첨
                            </button>
                            <button class="btn btn-secondary" id="reset-draw-btn">
                                <i class="fas fa-redo"></i> 초기화
                            </button>
                        </div>
                    </div>
                    <div class="card">
                        <h3 class="card-title">
                            <i class="fas fa-user-friends"></i> 참여자
                            <span class="badge" id="draw-participant-count">0</span>
                        </h3>
                        <div class="draw-status">
                            <span class="status-badge" id="draw-status">대기 중</span>
                        </div>
                        <div class="participant-list" id="draw-participants">
                            <div class="empty-state">참여자가 없습니다</div>
                        </div>
                    </div>
                </div>
                <div class="card winner-card" id="winner-card" style="display:none;">
                    <div class="winner-display">
                        <div class="winner-icon">🎉</div>
                        <h2>당첨자!</h2>
                        <div class="winner-list" id="winner-list"></div>
                    </div>
                </div>
            </div>

            <!-- Vote Subtab -->
            <div id="vote-subtab" class="vote-subtab">
                <div class="vote-grid">
                    <div class="card">
                        <h3 class="card-title"><i class="fas fa-plus-circle"></i> 투표 생성</h3>
                        <div class="form-group">
                            <label>투표 제목</label>
                            <input type="text" class="form-input" id="vote-question" placeholder="어떤 게임을 할까요?">
                        </div>
                        <div class="form-group">
                            <label>투표 시간 (초)</label>
                            <input type="number" class="form-input" id="vote-duration" value="60" min="10">
                        </div>
                        <div class="form-group">
                            <label>투표 항목</label>
                            <div id="vote-options-container">
                                <div class="vote-option-item">
                                    <span class="option-number">1</span>
                                    <input type="text" class="form-input" placeholder="항목 1">
                                    <button class="btn-icon btn-danger" onclick="removeVoteOption(this)">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                                <div class="vote-option-item">
                                    <span class="option-number">2</span>
                                    <input type="text" class="form-input" placeholder="항목 2">
                                    <button class="btn-icon btn-danger" onclick="removeVoteOption(this)">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <button class="btn btn-secondary btn-sm" id="add-vote-option-btn" style="margin-top:8px;">
                                <i class="fas fa-plus"></i> 항목 추가
                            </button>
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-primary" id="create-vote-btn">
                                <i class="fas fa-check"></i> 생성
                            </button>
                            <button class="btn btn-secondary" id="reset-vote-btn">
                                <i class="fas fa-redo"></i> 초기화
                            </button>
                        </div>
                    </div>
                    <div class="card">
                        <h3 class="card-title"><i class="fas fa-chart-bar"></i> 현재 투표</h3>
                        <div id="current-vote-display">
                            <div class="empty-state">진행 중인 투표가 없습니다</div>
                        </div>
                        <div id="vote-controls" class="vote-control-btns" style="display:none;">
                            <button class="btn btn-primary" id="start-vote-btn">
                                <i class="fas fa-play"></i> 시작
                            </button>
                            <button class="btn btn-danger" id="end-vote-btn" style="display:none;">
                                <i class="fas fa-stop"></i> 종료
                            </button>
                            <button class="btn btn-info" id="show-voters-btn" style="display:none;">
                                <i class="fas fa-users"></i> 투표자 보기
                            </button>
                            <button class="btn btn-success" id="draw-vote-btn" style="display:none;">
                                <i class="fas fa-trophy"></i> 추첨
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card" style="margin-top:20px;">
                    <div class="card-header">
                        <h3 class="card-title"><i class="fas fa-history"></i> 투표 기록</h3>
                        <button class="btn btn-sm btn-danger" id="clear-vote-history-btn">
                            <i class="fas fa-trash"></i> 전체 삭제
                        </button>
                    </div>
                    <div id="vote-history" class="vote-history-container">
                        <div class="empty-state">기록이 없습니다</div>
                    </div>
                </div>
            </div>

            <!-- Roulette Subtab -->
            <div id="roulette-subtab" class="vote-subtab">
                <div class="vote-grid">
                    <div class="card">
                        <h3 class="card-title"><i class="fas fa-list"></i> 룰렛 항목</h3>
                        <div id="roulette-items-container">
                            <div class="roulette-item">
                                <input type="text" class="form-input" placeholder="항목 이름">
                                <input type="number" class="form-input weight-input" value="1" min="1" placeholder="가중치">
                                <button class="btn-icon btn-danger" onclick="removeRouletteItem(this)">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="btn-group" style="margin-top:12px;">
                            <button class="btn btn-secondary btn-sm" id="add-roulette-item-btn">
                                <i class="fas fa-plus"></i> 항목 추가
                            </button>
                            <button class="btn btn-purple btn-sm" id="import-vote-btn">
                                <i class="fas fa-download"></i> 투표 가져오기
                            </button>
                        </div>
                        <div class="btn-group" style="margin-top:16px;">
                            <button class="btn btn-primary" id="create-roulette-btn">
                                <i class="fas fa-check"></i> 룰렛 생성
                            </button>
                            <button class="btn btn-secondary" id="reset-roulette-btn">
                                <i class="fas fa-redo"></i> 초기화
                            </button>
                        </div>
                    </div>
                    <div class="card">
                        <h3 class="card-title"><i class="fas fa-dharmachakra"></i> 룰렛</h3>
                        <div class="roulette-container" id="roulette-container">
                            <div class="empty-state">룰렛을 생성하세요</div>
                        </div>
                        <div id="roulette-controls" style="display:none; text-align:center; margin-top:16px;">
                            <button class="btn btn-primary btn-lg" id="spin-roulette-btn">
                                <i class="fas fa-play"></i> 돌리기!
                            </button>
                        </div>
                        <div class="roulette-result" id="roulette-result" style="display:none;">
                            <span class="result-label">🎉 결과:</span>
                            <span class="result-value" id="roulette-result-value"></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Subtab -->
            <div id="settings-subtab" class="vote-subtab">
                <div class="vote-grid">
                    <div class="card">
                        <h3 class="card-title"><i class="fas fa-link"></i> OBS 오버레이</h3>
                        <div class="form-group">
                            <label>오버레이 URL</label>
                            <div class="input-group">
                                <input type="text" class="form-input" id="overlay-url" readonly>
                                <button class="btn btn-primary" id="copy-overlay-url">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                            <small class="form-help">OBS 브라우저 소스에 추가하세요 (권장: 800x600)</small>
                        </div>
                    </div>
                    <div class="card">
                        <h3 class="card-title"><i class="fas fa-palette"></i> 오버레이 설정</h3>
                        <div class="form-group">
                            <label>배경 투명도</label>
                            <div class="slider-group">
                                <input type="range" class="form-slider" id="overlay-opacity" min="0" max="100" value="70">
                                <span id="overlay-opacity-value">70%</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>테마 색상</label>
                            <div class="color-group">
                                <input type="color" class="form-color" id="overlay-color" value="#00ff94">
                                <div class="color-presets">
                                    <button class="color-preset" style="background:#00ff94" data-color="#00ff94"></button>
                                    <button class="color-preset" style="background:#9966ff" data-color="#9966ff"></button>
                                    <button class="color-preset" style="background:#00d4ff" data-color="#00d4ff"></button>
                                    <button class="color-preset" style="background:#ff6b6b" data-color="#ff6b6b"></button>
                                    <button class="color-preset" style="background:#ffd93d" data-color="#ffd93d"></button>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>결과 표시 시간</label>
                            <div class="slider-group">
                                <input type="range" class="form-slider" id="overlay-auto-hide" min="3" max="15" value="5">
                                <span id="overlay-auto-hide-value">5초</span>
                            </div>
                            <small class="form-help">당첨자 발표 후 자동으로 사라지는 시간</small>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="overlay-animation" checked>
                                <span>애니메이션 효과</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="overlay-confetti" checked>
                                <span>팡파레 효과</span>
                            </label>
                        </div>
                        <button class="btn btn-primary" id="save-overlay-settings">
                            <i class="fas fa-save"></i> 저장
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Participation Tab -->
        <div id="participation-tab" class="tab-content">
            <div class="tab-header">
                <h2>시청자 참여</h2>
                <div class="tab-actions">
                    <button class="btn btn-primary" id="toggle-participation-btn">
                        <i class="fas fa-play"></i> 참여 시작
                    </button>
                    <button class="btn btn-secondary" id="clear-participation-btn">
                        <i class="fas fa-trash"></i> 전체 초기화
                    </button>
                </div>
            </div>
            <div class="card" style="margin-bottom:20px;">
                <h3 class="card-title"><i class="fas fa-cog"></i> 설정</h3>
                <div class="form-group">
                    <label>참여 명령어</label>
                    <input type="text" class="form-input" id="participation-command" value="!시참 참여" style="width:150px;">
                </div>
                <div class="form-group">
                    <label>최대 참여자 수</label>
                    <div class="slider-group">
                        <input type="range" class="form-slider" id="max-participants-slider" min="1" max="50" value="10">
                        <input type="number" class="form-input" id="max-participants" value="10" min="1" max="50" style="width:80px;">
                    </div>
                </div>
            </div>
            <div class="participation-grid">
                <div class="card">
                    <h3 class="card-title">
                        <i class="fas fa-clock"></i> 대기열
                        <span class="badge" id="waiting-count">0</span>
                    </h3>
                    <div class="participant-list" id="waiting-queue">
                        <div class="empty-state">대기자가 없습니다</div>
                    </div>
                </div>
                <div class="card">
                    <h3 class="card-title">
                        <i class="fas fa-users"></i> 참여중
                        <span class="badge" id="active-count">0</span>
                    </h3>
                    <div class="participant-list" id="active-participants">
                        <div class="empty-state">참여자가 없습니다</div>
                    </div>
                </div>
            </div>

            <!-- 현재 세션 참여 랭킹 -->
            <div class="card" style="margin-top: 20px;">
                <h3 class="card-title">
                    <i class="fas fa-star"></i> 현재 세션 참여 횟수
                    <span class="badge badge-info" id="session-ranking-count">0</span>
                </h3>
                <div class="ranking-list" id="session-ranking-list">
                    <div class="empty-state">참여 기록이 없습니다</div>
                </div>
            </div>

            <!-- 전체 누적 참여왕 랭킹 -->
            <div class="card" style="margin-top: 20px;">
                <h3 class="card-title">
                    <i class="fas fa-crown"></i> 참여왕 랭킹 (전체 누적)
                    <span class="badge badge-warning" id="total-ranking-count">0</span>
                </h3>
                <div class="ranking-list scrollable-ranking" id="total-ranking-list" style="max-height: 300px; overflow-y: auto;">
                    <div class="empty-state">참여 기록이 없습니다</div>
                </div>
                <button class="btn btn-secondary btn-block" id="load-more-ranking" style="margin-top: 10px; display: none;">
                    <i class="fas fa-chevron-down"></i> 더보기
                </button>
            </div>
        </div>

        <!-- Points Tab -->
        <div id="points-tab" class="tab-content">
            <div class="tab-header">
                <h2>포인트 관리</h2>
            </div>
            <div class="points-grid">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-cog"></i> 포인트 설정</h3>
                    <div class="form-group">
                        <label>채팅당 포인트</label>
                        <input type="number" class="form-input" id="points-per-chat" value="1" min="0">
                    </div>
                    <div class="form-group">
                        <label>쿨다운 (초)</label>
                        <input type="number" class="form-input" id="points-cooldown" value="60" min="0">
                    </div>
                    <div class="form-group">
                        <label>포인트 단위</label>
                        <input type="text" class="form-input" id="points-unit" value="포인트">
                    </div>
                    <button class="btn btn-primary" id="save-points-settings">
                        <i class="fas fa-save"></i> 저장
                    </button>
                </div>
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-trophy"></i> 포인트 랭킹</h3>
                    <div class="ranking-list" id="points-ranking">
                        <div class="empty-state">데이터가 없습니다</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modals (Add/Edit Command/Macro/Counter) ... (생략된 부분들은 index.html에서 가져옴) ... -->
    
    <!-- Notification Container -->
    <div id="notification-container"></div>

    <!-- Scripts (경로 수정됨) -->
    <script src="/vote-system.js"></script>
    <script src="/dashboard.js"></script>
</body>
</html>