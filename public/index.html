<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chzzk Bot Dashboard</title>
    <script src="config.js"></script>
    <script src="api-adapter.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="vote-ui-enhanced.css">
</head>
<body>
    <!-- Landing Page (Default Visible) -->
    <div id="landing-page" class="login-container">
        <div class="login-card">
            <div class="login-logo">
                <i class="fas fa-robot"></i>
            </div>
            <h1 class="login-title">치지직 봇 대시보드</h1>
            <p class="login-subtitle">방송 관리를 위한 최고의 파트너</p>
            
            <div class="login-btn-group">
                <button onclick="document.getElementById('login-overlay').classList.remove('hidden')" class="btn btn-primary" style="width: 100%; justify-content: center; font-size: 16px; padding: 12px;">
                    시작하기
                </button>
            </div>
        </div>
    </div>

    <!-- Login Overlay (Hidden by default) -->
    <div id="login-overlay" class="modal-overlay hidden">
        <div class="login-card">
            <h2 class="login-title">로그인</h2>
            <p class="login-subtitle">네이버 계정으로 연동합니다.</p>
            <a href="/auth/login" class="oauth-btn">
                <i class="fas fa-n"></i> 네이버로 로그인
            </a>
            <button onclick="document.getElementById('login-overlay').classList.add('hidden')" class="btn btn-secondary mt-2" style="width: 100%;">
                취소
            </button>
        </div>
    </div>

    <!-- App Container (Hidden until logged in) -->
    <div id="app-container" class="app-container hidden">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-robot" style="margin-right: 10px;"></i> 치지직 봇
            </div>
            
            <div class="sidebar-profile" id="sidebar-profile" style="padding: 20px; display: flex; align-items: center; border-bottom: 1px solid #333;">
                <div id="sidebar-avatar" style="width: 40px; height: 40px; border-radius: 50%; background-color: #555; background-size: cover; margin-right: 10px;"></div>
                <div id="sidebar-name" style="font-weight: bold;">로딩중...</div>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-item active" data-tab="dashboard">
                    <i class="fas fa-home"></i> 대시보드
                </div>
                <div class="nav-item" data-tab="commands">
                    <i class="fas fa-terminal"></i> 명령어
                </div>
                <div class="nav-item" data-tab="macros">
                    <i class="fas fa-clock"></i> 매크로
                </div>
                <div class="nav-item" data-tab="counters">
                    <i class="fas fa-calculator"></i> 카운터
                </div>
                <div class="nav-item" data-tab="songs">
                    <i class="fas fa-music"></i> 신청곡
                </div>
                <div class="nav-item" data-tab="votes">
                    <i class="fas fa-poll"></i> 투표/추첨
                </div>
                <div class="nav-item" data-tab="participation">
                    <i class="fas fa-users"></i> 시청자 참여
                </div>
                <div class="nav-item" data-tab="points">
                    <i class="fas fa-coins"></i> 포인트
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <div class="bot-status mb-2">
                    <div class="status-indicator" id="bot-status-indicator"></div>
                    <span id="bot-status-text">봇 미연결</span>
                </div>
                <button id="logout-btn" class="btn btn-secondary" style="width: 100%;">
                    <i class="fas fa-sign-out-alt"></i> 로그아웃
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="header">
                <div class="header-title" id="header-title">대시보드</div>
                <div class="header-profile" id="header-profile" style="display: flex; align-items: center;">
                    <div id="header-avatar" style="width: 32px; height: 32px; border-radius: 50%; background-color: #555; background-size: cover; margin-right: 10px;"></div>
                    <span id="header-username"></span>
                </div>
            </header>

            <div class="content-area">
                <!-- Dashboard Tab -->
                <div id="dashboard-tab" class="tab-content active">
                    <div class="dashboard-grid">
                        <div class="card channel-card">
                            <div class="channel-info">
                                <div class="channel-avatar" id="channel-avatar"></div>
                                <div class="channel-details">
                                    <h2 id="channel-name">채널명</h2>
                                    <div class="channel-stats" id="follower-count">팔로워: -</div>
                                </div>
                            </div>
                        </div>
                        <!-- Add other dashboard widgets here -->
                    </div>
                </div>

                <!-- Commands Tab -->
                <div id="commands-tab" class="tab-content">
                    <div class="card">
                        <div class="card-title">
                            명령어 목록
                            <button class="btn btn-primary" onclick="showModal('add-command-modal')" style="margin-left: auto;">추가</button>
                        </div>
                        <div class="item-list" id="commands-list"></div>
                    </div>
                </div>

                <!-- Add other tab contents (macros, counters, etc.) similarly -->
                <div id="macros-tab" class="tab-content"><div class="card"><div class="item-list" id="macros-list"></div></div></div>
                <div id="counters-tab" class="tab-content"><div class="card"><div class="item-list" id="counters-list"></div></div></div>
                
                <!-- Songs Tab -->
                <div id="songs-tab" class="tab-content">
                    <div class="dashboard-grid">
                        <div class="card">
                            <div class="card-title">현재 재생</div>
                            <div id="current-song" class="text-center">재생 중인 곡 없음</div>
                            <div class="player-controls mt-2" style="display: flex; justify-content: center; gap: 10px;">
                                <button id="play-pause-btn" class="btn btn-primary"><i class="fas fa-play"></i></button>
                                <button id="skip-btn" class="btn btn-secondary"><i class="fas fa-forward"></i></button>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-title">대기열 (<span id="queue-count">0</span>)</div>
                            <div id="song-queue-list" class="item-list"></div>
                        </div>
                    </div>
                </div>

                <!-- Placeholders for other tabs -->
                <div id="votes-tab" class="tab-content">투표 기능은 vote-system.js에서 로드됩니다.</div>
                <div id="participation-tab" class="tab-content">시청자 참여 기능</div>
                <div id="points-tab" class="tab-content">포인트 관리</div>
            </div>
        </main>
    </div>

    <!-- Modals (Example) -->
    <div id="add-command-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h2>명령어 추가</h2>
                <button class="modal-close" onclick="hideModal('add-command-modal')">×</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>명령어</label>
                    <input type="text" class="form-input" id="new-command-trigger">
                </div>
                <div class="form-group">
                    <label>응답</label>
                    <textarea class="form-textarea" id="new-command-response"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('add-command-modal')">취소</button>
                <button class="btn btn-primary" onclick="addCommand()">저장</button>
            </div>
        </div>
    </div>

    <script src="dashboard.js"></script>
    <script src="vote-system.js"></script>
</body>
</html>
